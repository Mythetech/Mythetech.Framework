@using MudBlazor
@using Mythetech.Framework.Components.Buttons
@namespace Mythetech.Framework.Components.Settings

<Button Variant="Variant.Text"
        Color="@(IsActive ? Color.Primary : Color.Default)"
        Class="@($"mf-settings-nav-item justify-start {(IsActive ? "active" : "")}")"
        FullWidth="true"
        OnClick="HandleClick">
    <ChildContent>
        <MudIcon Icon="@Icon" Size="Size.Small" Class="mr-3" />
        <MudText>@DisplayName</MudText>
        @if (MatchCount.HasValue && MatchCount.Value > 0)
        {
            <MudSpacer />
            <MudChip T="string" Size="Size.Small" Color="Color.Primary" Variant="Variant.Text" Class="mf-match-count">
                @MatchCount
            </MudChip>
        }
    </ChildContent>
</Button>

@code {
    /// <summary>
    /// The unique identifier for this settings section.
    /// </summary>
    [Parameter, EditorRequired]
    public string SettingsId { get; set; } = "";

    /// <summary>
    /// The display name shown in the navigation.
    /// </summary>
    [Parameter, EditorRequired]
    public string DisplayName { get; set; } = "";

    /// <summary>
    /// The icon to display next to the name.
    /// </summary>
    [Parameter, EditorRequired]
    public string Icon { get; set; } = "";

    /// <summary>
    /// Whether this navigation item is currently active/selected.
    /// </summary>
    [Parameter]
    public bool IsActive { get; set; }

    /// <summary>
    /// Callback when this navigation item is clicked.
    /// </summary>
    [Parameter]
    public EventCallback OnClick { get; set; }

    /// <summary>
    /// Optional count of matching settings in this section (shown during search).
    /// </summary>
    [Parameter]
    public int? MatchCount { get; set; }

    private async Task HandleClick()
    {
        await OnClick.InvokeAsync();
    }
}
